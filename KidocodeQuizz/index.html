<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KidoCode Quiz</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&family=Bubblegum+Sans&display=swap" rel="stylesheet">
    <style>
        /* Basic styles */
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            background-color: #2d1043;
            color: #fff;
        }

        /* Navbar */
        nav {
            background-color: #3f1559;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            width: 98%;
            z-index: 100;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .logo {
            display: flex;
            align-items: center;
        }

        .logo img {
            height: 50px;
            margin-right: 10px;
        }

        .logo h1 {
            font-family: 'Bubblegum Sans', cursive;
            font-size: 1.8em;
            margin: 0;
        }

        nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
        }

        nav li {
            margin-left: 20px;
        }

        nav a {
            color: #fff;
            text-decoration: none;
            transition: background-color 0.3s ease, color 0.3s ease;
            padding: 10px 15px;
            border-radius: 5px;
        }

        nav a:hover {
            background-color: #fff;
            color: #3f1559;
        }

        /* Hero Section */
        #hero {
            background-color: #00f2ff;
            color: #2d1043;
            padding: 60px;
            text-align: center;
        }

        #hero h1 {
            font-family: 'Bubblegum Sans', cursive;
            font-size: 4em;
            margin-bottom: 20px;
        }

        #hero p {
            font-size: 1.4em;
            margin-bottom: 30px;
        }

        /* Quiz Posters */
        #quiz-posters {
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
        }

        .poster {
            border-radius: 45px;
            overflow: hidden;
            box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s ease-in-out;
            background-color: #883bb7;
            position: relative;
        }

        .poster img {
            width: 100%;
            display: block;
            height: 200px;
            object-fit: cover;
        }

        .poster-content {
            padding: 20px;
            color: white;
        }

        .poster h2 {
            margin-bottom: 10px;
        }

        .timer {
            font-size: 1.2em;
            color: #ccc;
            position: absolute;
            bottom: 10px;
            left: 10px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            #quiz-posters {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
        }

        /* Navbar animation */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        nav a:hover {
            animation: shake 0.5s;
        }

        /* Quiz Poster Animations */
        .poster {
            transition: transform 0.2s ease-in-out, box-shadow 0.3s ease;
        }

        .poster:hover {
            transform: scale(1.05);
            box-shadow: 8px 8px 20px rgba(0, 0, 0, 0.3);
        }

        /* Fade-in animation for quiz posters */
        .poster {
            opacity: 0;
            animation: fadeIn 1s forwards;
        }
        .poster {
            display: block !important;
            visibility: visible !important;
        }
        

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Bounce animation */
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40%, 60% {
                transform: translateY(-10px);
            }
        }

        .poster:nth-child(even) {
            animation: bounce 1.5s infinite;
        }

        #quiz-sections {
            padding: 20px;
        }

        .quiz-category {
            margin-bottom: 30px;
        }

        .quiz-category h2 {
            font-size: 2em;
            margin-bottom: 20px;
            text-align: center;
        }

        .quiz-posters {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr; /* Explicitly create three columns */
            gap: 10px;
        } 

        #quiz-navigation {
            text-align: center;
            margin-bottom: 20px;
        }

        .quiz-nav-btn-begin {
            background-size: 100%;
            color: white;
            padding: 15px 30px; /* Adjust padding as needed */
            font-size: 1.5em; /* Adjust font size */
            font-weight: bold; /* Make the text bold */
            border: 2px solid black;
            clip-path: polygon(0 0, 100% 0, 100% 80%, 50% 100%, 0 80%); /* Trapezoid */
            cursor: pointer;
            transition: transform 0.2s ease;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.5); /* Shadow */
            font-family: sans-serif; /* Adjust font family */
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8); /* Add text shadow */
            animation: colorCycleBegin 10s linear infinite; /* Apply the new animation */
            }
        .quiz-nav-btn-inter {
            background-size: 100%;
            color: white;
            padding: 15px 30px; /* Adjust padding as needed */
            font-size: 1.5em; /* Adjust font size */
            font-weight: bold; /* Make the text bold */
            border: 2px solid black;
            clip-path: polygon(0 0, 100% 0, 100% 80%, 50% 100%, 0 80%); /* Trapezoid */
            cursor: pointer;
            transition: transform 0.2s ease;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.5); /* Shadow */
            font-family: sans-serif; /* Adjust font family */
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8); /* Add text shadow */
            animation: colorCycleInter 10s linear infinite; /* Apply a unique animation name */
        }
        .quiz-nav-btn-adv {
            background-size: 100%;
            color: white;
            padding: 15px 30px; /* Adjust padding as needed */
            font-size: 1.5em; /* Adjust font size */
            font-weight: bold; /* Make the text bold */
            border: 2px solid black;
            clip-path: polygon(0 0, 100% 0, 100% 80%, 50% 100%, 0 80%); /* Trapezoid */
            cursor: pointer;
            transition: transform 0.2s ease;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.5); /* Shadow */
            font-family: sans-serif; /* Adjust font family */
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8); /* Add text shadow */
            animation: colorCycleAdv 10s linear infinite; /* Apply the new animation */
        }

        .quiz-nav-btn-begin:hover {
            transform: scale(1.05);
        }
        .quiz-nav-btn-inter:hover {
            transform: scale(1.05);
        }
        .quiz-nav-btn-adv:hover {
            transform: scale(1.05);
        }
        .quiz-nav-btn-begin,
        .quiz-nav-btn-inter,
        .quiz-nav-btn-adv {
            position: relative; /* Needed for positioning */
            /* ... your other button styles (background, border, clip-path, etc.) ... */
            overflow: hidden; /* Prevent GIF overflow */
        }

        .quiz-nav-btn-begin img,
        .quiz-nav-btn-inter img,
        .quiz-nav-btn-adv img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%; /* Make GIF fill the button */
            height: 100%; /* Make GIF fill the button */
            object-fit: cover; /* Maintain aspect ratio */
        }

        .quiz-nav-btn-begin span,
        .quiz-nav-btn-inter span,
        .quiz-nav-btn-adv span {
            position: sticky;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
        }

        /* ... (Your existing .poster and other styles) ... */
        @media (max-width: 768px) {
            .quiz-posters {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
        }
        
    </style>
</head>
<body>
    <nav>
        <div class="logo">
            <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="20.6924" y="8" width="2.46154" height="2.46154" fill="white"></rect>
                <rect x="18.2149" y="10.4614" width="2.46154" height="2.46154" fill="white"></rect>
                <rect x="20.6924" y="12.9233" width="2.46154" height="2.46154" fill="white"></rect>
                <rect x="8.84619" y="8" width="2.46154" height="2.46154" fill="white"></rect>
                <rect x="11.38477" y="10.4614" width="2.46154" height="2.46154" fill="white"></rect>
                <rect x="8.84619" y="12.9233" width="2.46154" height="2.46154" fill="white"></rect>
                <rect x="8.61523" y="19.0769" width="2.46154" height="2.46154" fill="white"></rect>
                <rect x="20.9229" y="19.0769" width="2.46154" height="2.46154" fill="white"></rect>
                <rect x="11.0771" y="21.5386" width="9.84616" height="2.46154" fill="white"></rect>
                <rect x="8" y="18" width="3" height="1" fill="white"></rect>
                <rect x="11" y="19" width="3" height="1" fill="white"></rect>
                <rect x="14" y="20" width="4" height="1" fill="white"></rect>
                <rect x="18" y="19" width="3" height="1" fill="white"></rect>
                <rect x="21" y="18" width="3" height="1" fill="white"></rect>
                <rect x="1.23077" y="1.23077" width="29.5385" height="29.5385" rx="4.92308" stroke="white" stroke-width="2.46154"></rect>
            </svg>
            <h1 ><a href ="index.html">KQuizz</a></h1>
        </div>
        <ul>
            <li><a href="#">Cubie</a></li>
            <li><a href="#">KRoom(Zoom)</a></li>
            <li><a href="#">About Us</a></li>
        </ul>
    </nav>

    <div id="hero">
        <h1>KQuizz</h1>
        <p>Test your skills and learn while having fun!</p>
    </div>

    <div id="quiz-navigation">
        <button class="quiz-nav-btn-begin" id="beginner-btn">
            <img src="src/Button_section.gif" alt="Beginner GIF">
            <span>Beginner</span>
        </button>
        <button class="quiz-nav-btn-inter" id="intermediate-btn">
            <img src="src/Button_section.gif" alt="Intermediate GIF">
            <span>Intermediate</span>
        </button>
        <button class="quiz-nav-btn-adv" id="advanced-btn">
            <img src="src/Button_section.gif" alt="Advance GIF">
            <span>Advanced</span>
        </button>
    </div>

    <div id="dynamic-quiz-sections">
        </div>
        </div>
    </div>
    <script>
        // JavaScript for timers and poster clicks
        const posters = document.querySelectorAll('.poster');
    
        posters.forEach(poster => {
            const timer = poster.querySelector('.timer');
            const posterLink = poster.querySelector('.poster-link');
    
            // Timer logic (replace with your actual timer implementation)
            let timeLeft = 600; // Example: 10 minutes in seconds
    
            function updateTimer() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timer.textContent = `Time Left: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                timeLeft--;
    
                if (timeLeft < 0) {
                    clearInterval(timerInterval);
                    alert("Time's up!");
                }
            }
    
            updateTimer(); // Initial display
            const timerInterval = setInterval(updateTimer, 1000); // Update every second
    
            // Poster click redirect
            posterLink.addEventListener('click', (event) => {
                event.preventDefault(); // Prevent default link behavior
                window.location.href = posterLink.href; // Redirect to quiz page
            });
        });

       // Function to fetch and display quizzes based on difficulty
       function displayQuizzes(difficulty) {
        fetch('questions.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                const filteredQuizzes = data.filter(quiz => quiz.difficulty === difficulty);
    
                const quizPostersHtml = filteredQuizzes.map(quiz => {
                    return `
                        <div class="poster">
                            <img src="${quiz.posterImage}" alt="${quiz.quizSection} Poster">
                            <div class="poster-content">
                                <h2>${quiz.quizSection}</h2>
                                <a href="${quiz.quizSection.toLowerCase().replace(' ', '_')}_preview.html" class="poster-link">Start Quiz</a>
                            </div>
                        </div>
                    `;
                }).join('');
    
                dynamicQuizSections.innerHTML = quizPostersHtml;
            })
            .catch(error => {
                console.error('Error fetching quiz data:', error);
                dynamicQuizSections.innerHTML = '<p>An error occurred while loading quizzes. Please try again later.</p>';
            });
    }

        // Event listeners for difficulty buttons
        beginnerBtn.addEventListener('click', () => displayQuizzes('beginner'));
        intermediateBtn.addEventListener('click', () => displayQuizzes('intermediate'));
        advancedBtn.addEventListener('click', () => displayQuizzes('advanced'));
            
        // JavaScript for dynamic quiz category navigation
        const beginnerBtn = document.getElementById('beginner-btn');
        const intermediateBtn = document.getElementById('intermediate-btn');
        const advancedBtn = document.getElementById('advanced-btn');

        const dynamicQuizSections = document.getElementById('dynamic-quiz-sections');

        beginnerBtn.addEventListener('click', () => {
            // Fetch and display beginner quizzes
        });

        intermediateBtn.addEventListener('click', () => {
            // Fetch and display intermediate quizzes
        });

        advancedBtn.addEventListener('click', () => {
            // Fetch and display advanced quizzes
        });

        // Event listener for poster clicks
        document.addEventListener('click', (event) => {
            if (event.target.classList.contains('poster-link')) {
                window.location.href = event.target.href; // Redirect to quiz page
            }
        });
    </script>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-analytics.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
    
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = "api-key.env";
    
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);

        document.addEventListener("DOMContentLoaded", function() {
            let pythonPoster = document.querySelector("img[src='src/Python_poster.png']");
            if (!pythonPoster) {
                console.log("Python quiz poster not found in the DOM.");
            } else {
                console.log("Python quiz poster is present.");
                pythonPoster.parentElement.style.display = "block"; // Force show
            }
        });
        
    </script>
    <script type="module">
        import { getDatabase, ref, get, child } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-database.js";
    
        const db = getDatabase();
        const quizSections = {
            beginner: document.getElementById("beginner-btn"),
            intermediate: document.getElementById("intermediate-btn"),
            advanced: document.getElementById("advanced-btn")
        };
    
        function loadQuizzes() {
            const dbRef = ref(db, "quizzes");
    
            get(dbRef).then((snapshot) => {
                if (snapshot.exists()) {
                    const quizzes = snapshot.val();
                    Object.values(quizzes).forEach(quiz => {
                        const quizDiv = document.createElement("div");
                        quizDiv.classList.add("poster");
                        quizDiv.innerHTML = `
                            <img src="${quiz.poster}" alt="${quiz.title} Poster">
                            <div class="poster-content">
                                <h2>${quiz.title}</h2>
                                <a href="quiz.html?title=${quiz.title}" class="poster-link">Start Quiz</a>
                            </div>
                        `;
                        quizSections[quiz.difficulty].appendChild(quizDiv);
                    });
                } else {
                    console.log("No quizzes found!");
                }
            }).catch(error => console.error("Error fetching quizzes:", error));
        }
    
        document.addEventListener("DOMContentLoaded", loadQuizzes);
    </script>
    
    
</body>
</html>